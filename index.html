<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>fade</title>
    <link rel="stylesheet" href="./src/reset.css">
 <!--    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"> -->
  </head>
  <body>
    <div id="app" style="width:100%;height:100%">
      <router-view name='header'></router-view>
    	<router-view></router-view>
    </div>
    <!-- <script src="http://cdn.bootcss.com/jquery/3.1.1/jquery.js"></script>
    <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script> -->
    <script>
      //定义全局变量与全局函数，在任意组件中都能访问与使用。

      let db
      let currentUser
       //定义db用于保存数据,currentUser用于缓存当前登录的用户数据
      function initDB () {
        if(localStorage.mytwitter){
          db = JSON.parse(localStorage.mytwitter)
        } else{
          db = {}
          db.users = []
        }
      }

      function saveDB () {
        localStorage.mytwitter = JSON.stringify(db); 
      }

      function initCache () {
        currentUser = JSON.parse(sessionStorage.currentUser)
      }
      function saveCache () {
        sessionStorage.currentUser = JSON.stringify(currentUser)
      }
      //定义冒泡排序函数用于对需要渲染的推文按时间排序
      function bubbleSort (Array) {
        let d
        for(let i=0;i<Array.length;i++){
          for(let j=0;j<Array.length;j++){
            if(Array[j].date<Array[i].date){
              d=Array[j]
              Array[j]=Array[i]
              Array[i]=d
            }
          }
        }
        return Array
      }
      function turnDate(date){
        let now = new Date().getTime()
        let postTime = now - date
        if(postTime<300000) return '刚刚'
          else if(postTime<3600000) return parseInt(postTime/60000)+'分钟前'
            else if(postTime<86400000) return parseInt(postTime/3600000)+'小时前'
              else if(postTime<604800000) return parseInt(postTime/86400000)+'天前'
              else if(postTime<31536000000) return parseInt(postTime/604800000)+'周前'
                else return '一年前'
      }
      function getPageOwner(id){
        initDB()
        for(let i=0; i<db.users.length; i++){
          if(id===db.users[i].username){
            sessionStorage.OwnerNumber = i
            return db.users[i]
          }
        }    
      }

    </script>
    <script src="/dist/build.js"></script>
  </body>
</html>
